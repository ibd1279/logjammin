<?lc if request:has_attribute("_error") then ?><div class="error">${request:attribute("_error")}</div><?lc end ?>
<h3>Editing ${role:name() == "" and "New Role" or role:name()}</h3>
<form method="POST" action="${request:original_request_file()}">
    <fieldset>
        <legend>Identity</legend>
        <div>
            <label>Name
                <input type="text" name="name" value="${role:name()}" />
            </label>
        </div>
    </fieldset>
    <fieldset>
        <legend>Access</legend>
        <div>
            <label>Allowed
                <?lc for h, allowed in ipairs(role:allowed()) do ?><input name="allowed" value="${_html(allowed)}" type="text" />
                <?lc end ?>
                <input name="allowed" type="text" />
            </label>
        </div>
        <div>
            <input value="Save" type="submit" />
        </div>
    </fieldset>
</form>
