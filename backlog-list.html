<?lc if request:has_attribute("_error") then ?><div class="error">
    ${_html(request:attribute("_error"))}
</div><?lc end ?>
<div>
    <form action="${_html(request:attribute("project"))}/backlog-search">
        <label for="q">Search</label>
        <input type="text" name="q" value="${_html(request:param("q"))}" />
        <input type="submit" value="Search" />
    </form>
</div>
<?lc if request:has_param("q") then ?><div>
    Search results for &quot;${_html(request:param("q"))}&quot;.
</div><?lc else ?><div>
    <a href="backlog-edit?project=${_html(request:attribute("project"))}&amp;version=${_html(request:attribute("version"))}&amp;category=${_html(request:attribute("category"))}">Create a new task...</a>
</div><?lc end ?>
<table>
  <thead>
  <tr>
    <th>
      ID
    </th>
    <th>
      Name
    </th>
    <th>
      Version
    </th>
    <th>
      Category
    </th>
    <th>
      Disposition
    </th>
    <th>
      Estimate
    </th>
    <th>
      Actual
    </th>
  </tr>
  </thead>
  <tbody>
    <?lc if backlogs and table.getn(backlogs) > 0 then ?>
      <?lc for h, backlog in ipairs(backlogs) do ?><tr>
        <td>${_html(backlog:pkey())}</td>
        <td><a href="${_html(backlog:pkey())}/backlog-edit">${_html(backlog:brief())}</a></td>
        <td>${_html(backlog:version())}</td>
        <td>${_html(backlog:category())}</td>
        <td>${_html(backlog:disposition():sub(5))}</td>
        <td>${_html(backlog:estimate())}</td>
        <td>${_html(backlog:actual())}</td>
      </tr><?lc end ?>
    <?lc else ?>
      <tr><td colspan="7">No backlogs found.</td></tr>
    <?lc end ?>
  </tbody>
</table>
